const t=t=>t.replace(/\/$/,"").replace(/^\//,"");export default class{constructor(s){if(this.t=[],this.s=null,this.i=null,this.h=null,this.add=(s,i)=>{s="/"===s?"^/?$":new RegExp(t(s)+"$"),this.t.push({path:s,component:i})},this.o=(t,s)=>{const{view:i,state:n}=t(s);"function"==typeof i().then?(this.s&&this.h(this.i,this.s),i().then(t=>{this.h(this.i,t.default,n)})):this.h(this.i,i,n)},this.listen=()=>{const s=(()=>{let s="";const i=window.location.href.match(/#!(.*)$/);return s=i?i[1]:"",t(s)})();this.t.some(({path:t,component:i})=>{const n=s.match(t);return!!n&&(n.shift(),this.o(i,n),n)})},!s.mount)throw Error('[Router] "mount" point is missing');if(!s.render)throw Error('[Router] "render" func is missing');this.i=document.querySelector(s.mount),this.h=s.render,s.preloader&&(this.s=s.preloader),window.addEventListener("popstate",()=>this.listen())}}
//# sourceMappingURL=router.modern.js.map
