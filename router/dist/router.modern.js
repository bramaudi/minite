const t=t=>t.replace(/\/$/,"").replace(/^\//,"");export default class{constructor(s){if(this.t=[],this.s=null,this.i=null,this.o=null,this.add=(s,i)=>{s="/"===s?"^/?$":new RegExp(t(s)+"$"),this.t.push({path:s,component:i})},this.h=(t,s)=>{const i=t(s),{view:n,state:o}=i;"function"==typeof i.then?(this.s&&this.o(this.i,this.s),i.then(t=>{const{view:s,state:i}=t.default();this.o(this.i,s,i)})):this.o(this.i,n,o)},this.listen=()=>{const s=(()=>{let s="";const i=window.location.href.match(/#!(.*)$/);return s=i?i[1]:"",t(s)})();this.t.some(({path:t,component:i})=>{const n=s.match(t);return!!n&&(n.shift(),this.h(i,n),n)})},!s.mount)throw Error('[Router] "mount" point is missing');if(!s.render)throw Error('[Router] "render" func is missing');this.i=document.querySelector(s.mount),this.o=s.render,s.preloader&&(this.s=s.preloader),window.addEventListener("popstate",()=>this.listen())}}
//# sourceMappingURL=router.modern.js.map
