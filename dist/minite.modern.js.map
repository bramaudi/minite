{"version":3,"file":"minite.modern.js","sources":["../src/element.js","../src/index.js","../node_modules/mitt/dist/mitt.es.js"],"sourcesContent":["/**\n * Check if tag name is svg\n * @param {String} tagName\n */\nfunction isSVG(tagName) {\n  const patt = new RegExp('^' + tagName + '$', 'i')\n  const SVGTags = ['path', 'svg', 'use', 'g']\n  return SVGTags.some(tag => patt.test(tag))\n}\n\n/**\n * Inline style\n * @param {Object} styles\n */\nfunction objectToStyleString(styles) {\n  return Object.keys(styles)\n    .map(prop => `${prop}: ${styles[prop]}`)\n    .join(';')\n}\n\nexport const createElement = function (tagName, attrs, ...children) {\n\n  // Flexibility, can skip attrs and pass as child\n  if (Array.isArray(attrs)) children = attrs\n  else if (typeof attrs === 'string') children.push(attrs)\n\n  // For re-usable / nested jsx component\n  if (typeof tagName === 'function') return tagName(attrs, children)\n  \n  // If tagName are 'x' it became fragment\n  if (tagName === 'x') return children\n \n  // Lowercasing all attrs key, onClick -> onclick\n  if (typeof attrs === 'object') {\n    for (const key in attrs) {\n      attrs[key.toLocaleLowerCase()] = attrs[key]\n    }\n  }\n \n  var elem = Object.assign(\n    document.createElement(tagName),\n    typeof attrs === 'object' ? attrs : {}\n  )\n\n  if (isSVG(tagName)) {\n    elem = document.createElementNS('http://www.w3.org/2000/svg', tagName)\n\n    for (const prop in attrs) {\n      if (attrs.hasOwnProperty(prop)) {\n        elem.setAttribute(prop, attrs[prop])\n      }\n    }\n  }\n\n  // Apply style\n  if (attrs && attrs.hasOwnProperty('style')) {\n    elem.style = objectToStyleString(attrs['style'])\n  }\n \n  // Append childrens\n  for (const child of children) {\n    if (Array.isArray(child)) elem.append(...child)\n    else elem.append(child)\n  }\n\n  return elem\n\n}\n","export { createElement as m } from './element.js'\nimport mitt from 'mitt'\n\n/**\n * EventBus for state setter\n */\nconst emitter = mitt()\n\n/**\n * \n * @param {HTMLElement} root - Parent element\n * @param {HTMLElement} view - Component created by \"createElement\" function\n * @param {object} initState - Initial state\n */\nexport const render = (root, view, initState = []) => {\n  \n  // Initialize state\n  let state = initState;\n\n  // Clear all previous event\n  emitter.all.clear()\n\n  // Get props from element to be cached\n  const cacheProps = e => ({\n    id: e.id,\n    selectionStart: e.selectionStart,\n    selectionEnd: e.selectionEnd,\n    selectionDirection: e.selectionDirection,\n    scrollTop: e.scrollTop,\n    scrollLeft: e.scrollLeft\n  });\n\n  /**\n   * Render function\n   * @param {HTMLElement} tree - Rendered given Component\n   */\n  const renderer = tree => {  \n    const focusedId = (document.activeElement || {id:''}).id;\n    const identifiedElements = Array.prototype.map.call(document.querySelectorAll('[id]'), cacheProps);\n    while (root.firstChild) root.removeChild(root.firstChild);\n    root.append(...Array.isArray(tree) ? tree : [tree]);\n    identifiedElements.forEach(element => {\n      const newElement = document.getElementById(element.id);\n      if (newElement) {\n        // Preserve input focus on re-render using id\n        if(element.id === focusedId) newElement.focus();\n        Object.assign(newElement, element);\n      }\n    });\n  };\n\n  // Listen state setter\n  emitter.on('*', (type, e) => {\n    state[type] = e\n    renderer(view(state, emitter.emit))\n  })\n  \n  renderer(view(state, emitter.emit));\n\n}\n","export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i&&i.push(e)||n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&i.splice(i.indexOf(e)>>>0,1)},emit:function(t,e){(n.get(t)||[]).slice().map(function(n){n(e)}),(n.get(\"*\")||[]).slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.es.js.map\n"],"names":["createElement","tagName","attrs","children","Array","isArray","push","key","toLocaleLowerCase","styles","elem","Object","assign","document","patt","RegExp","some","tag","test","isSVG","createElementNS","prop","hasOwnProperty","setAttribute","style","keys","map","join","child","append","emitter","all","n","Map","on","t","e","i","get","set","off","splice","indexOf","emit","slice","render","root","view","initState","state","clear","cacheProps","id","selectionStart","selectionEnd","selectionDirection","scrollTop","scrollLeft","renderer","tree","focusedId","activeElement","identifiedElements","prototype","call","querySelectorAll","firstChild","removeChild","forEach","element","newElement","getElementById","focus","type"],"mappings":"AAoBaA,MAAAA,EAAgB,SAAUC,EAASC,KAAUC,GAOxD,GAJIC,MAAMC,QAAQH,GAAQC,EAAWD,EACX,iBAAVA,GAAoBC,EAASG,KAAKJ,GAG3B,mBAAZD,EAAwB,OAAOA,EAAQC,EAAOC,GAGzD,GAAgB,MAAZF,EAAiB,OAAOE,EAG5B,GAAqB,iBAAVD,EACT,IAAK,MAAMK,KAAOL,EAChBA,EAAMK,EAAIC,qBAAuBN,EAAMK,GAI3C,IAzB2BE,EAyBvBC,EAAOC,OAAOC,OAChBC,SAASb,cAAcC,GACN,iBAAVC,EAAqBA,EAAQ,IAGtC,GAxCF,SAAeD,GACb,MAAMa,EAAO,IAAIC,OAAO,IAAMd,EAAU,IAAK,KAE7C,MADgB,CAAC,OAAQ,MAAO,MAAO,KACxBe,KAAKC,GAAOH,EAAKI,KAAKD,IAqCjCE,CAAMlB,GAAU,CAClBS,EAAOG,SAASO,gBAAgB,6BAA8BnB,GAE9D,IAAK,MAAMoB,KAAQnB,EACbA,EAAMoB,eAAeD,IACvBX,EAAKa,aAAaF,EAAMnB,EAAMmB,IAMhCnB,GAASA,EAAMoB,eAAe,WAChCZ,EAAKc,OA1CoBf,EA0CQP,EAAK,MAzCjCS,OAAOc,KAAKhB,GAChBiB,IAAIL,GAAS,GAAEA,MAASZ,EAAOY,MAC/BM,KAAK,OA2CR,IAAK,MAAMC,KAASzB,EACdC,MAAMC,QAAQuB,GAAQlB,EAAKmB,UAAUD,GACpClB,EAAKmB,OAAOD,GAGnB,OAAOlB,GC3DHoB,ECN2B,CAACC,IAAIC,EAAEA,GAAG,IAAIC,IAAIC,GAAG,SAASC,EAAEC,GAAG,IAAIC,EAAEL,EAAEM,IAAIH,GAAGE,GAAGA,EAAE/B,KAAK8B,IAAIJ,EAAEO,IAAIJ,EAAE,CAACC,KAAKI,IAAI,SAASL,EAAEC,GAAG,IAAIC,EAAEL,EAAEM,IAAIH,GAAGE,GAAGA,EAAEI,OAAOJ,EAAEK,QAAQN,KAAK,EAAE,IAAIO,KAAK,SAASR,EAAEC,IAAIJ,EAAEM,IAAIH,IAAI,IAAIS,QAAQlB,IAAI,SAASM,GAAGA,EAAEI,MAAMJ,EAAEM,IAAI,MAAM,IAAIM,QAAQlB,IAAI,SAASM,GAAGA,EAAEG,EAAEC,OAAhR,IAASJ,EDcxB,MAAaa,EAAS,CAACC,EAAMC,EAAMC,EAAY,MAG7C,IAAIC,EAAQD,EAGZlB,EAAQC,IAAImB,QAGZ,MAAMC,EAAaf,KACjBgB,GAAIhB,EAAEgB,GACNC,eAAgBjB,EAAEiB,eAClBC,aAAclB,EAAEkB,aAChBC,mBAAoBnB,EAAEmB,mBACtBC,UAAWpB,EAAEoB,UACbC,WAAYrB,EAAEqB,aAOVC,EAAWC,IACf,MAAMC,GAAa/C,SAASgD,eAAiB,CAACT,GAAG,KAAKA,GAChDU,EAAqB1D,MAAM2D,UAAUrC,IAAIsC,KAAKnD,SAASoD,iBAAiB,QAASd,GACvF,KAAOL,EAAKoB,YAAYpB,EAAKqB,YAAYrB,EAAKoB,YAC9CpB,EAAKjB,UAAUzB,MAAMC,QAAQsD,GAAQA,EAAO,CAACA,IAC7CG,EAAmBM,QAAQC,IACzB,MAAMC,EAAazD,SAAS0D,eAAeF,EAAQjB,IAC/CkB,IAECD,EAAQjB,KAAOQ,GAAWU,EAAWE,QACxC7D,OAAOC,OAAO0D,EAAYD,OAMhCvC,EAAQI,GAAG,IAAK,CAACuC,EAAMrC,KACrBa,EAAMwB,GAAQrC,EACdsB,EAASX,EAAKE,EAAOnB,EAAQa,SAG/Be,EAASX,EAAKE,EAAOnB,EAAQa"}