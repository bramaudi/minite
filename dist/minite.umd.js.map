{"version":3,"file":"minite.umd.js","sources":["../src/element.js","../src/index.js","../node_modules/mitt/dist/mitt.es.js"],"sourcesContent":["/**\n * Check if tag name is svg\n * @param {String} tagName\n */\nfunction isSVG(tagName) {\n  const patt = new RegExp('^' + tagName + '$', 'i')\n  const SVGTags = ['path', 'svg', 'use', 'g']\n  return SVGTags.some(tag => patt.test(tag))\n}\n\n/**\n * Inline style\n * @param {Object} styles\n */\nfunction objectToStyleString(styles) {\n  return Object.keys(styles)\n    .map(prop => `${prop}: ${styles[prop]}`)\n    .join(';')\n}\n\nexport const createElement = function (tagName, attrs, ...children) {\n\n  // Flexibility, can skip attrs and pass as child\n  if (Array.isArray(attrs)) children = attrs\n  else if (typeof attrs === 'string') children.push(attrs)\n\n  // For re-usable / nested jsx component\n  if (typeof tagName === 'function') return tagName(attrs, children)\n  \n  // If tagName are 'x' it became fragment\n  if (tagName === 'x') return children\n \n  // Lowercasing all attrs key, onClick -> onclick\n  if (typeof attrs === 'object') {\n    for (const key in attrs) {\n      attrs[key.toLocaleLowerCase()] = attrs[key]\n    }\n  }\n \n  var elem = Object.assign(\n    document.createElement(tagName),\n    typeof attrs === 'object' ? attrs : {}\n  )\n\n  if (isSVG(tagName)) {\n    elem = document.createElementNS('http://www.w3.org/2000/svg', tagName)\n\n    for (const prop in attrs) {\n      if (attrs.hasOwnProperty(prop)) {\n        elem.setAttribute(prop, attrs[prop])\n      }\n    }\n  }\n\n  // Apply style\n  if (attrs && attrs.hasOwnProperty('style')) {\n    elem.style = objectToStyleString(attrs['style'])\n  }\n \n  // Append childrens\n  for (const child of children) {\n    if (Array.isArray(child)) elem.append(...child)\n    else elem.append(child)\n  }\n\n  return elem\n\n}\n","export { createElement as m } from './element.js'\nimport mitt from 'mitt'\n\n/**\n * EventBus for state setter\n */\nconst emitter = mitt()\n\n/**\n * \n * @param {HTMLElement} root - Parent element\n * @param {HTMLElement} view - Component created by \"createElement\" function\n * @param {object} initState - Initial state\n */\nexport const render = (root, view, initState = {}) => {\n  \n  // Initialize state\n  let state = initState;\n\n  // Clear all previous event\n  emitter.all.clear()\n\n  // Get props from element to be cached\n  const cacheProps = e => ({\n    id: e.id,\n    selectionStart: e.selectionStart,\n    selectionEnd: e.selectionEnd,\n    selectionDirection: e.selectionDirection,\n    scrollTop: e.scrollTop,\n    scrollLeft: e.scrollLeft\n  });\n\n  /**\n   * Render function\n   * @param {HTMLElement} tree - Rendered given Component\n   */\n  const renderer = tree => {\n    const focusedId = (document.activeElement || {id:''}).id;\n    const identifiedElements = Array.prototype.map.call(document.querySelectorAll('[id]'), cacheProps);\n\n    // Clear element before append\n    while (root.firstChild) root.removeChild(root.firstChild);\n    root.append(...Array.isArray(tree) ? tree : [tree]);\n\n    identifiedElements.forEach(element => {\n      const newElement = document.getElementById(element.id);\n      if (newElement) {\n        // Preserve input focus on re-render using id\n        if(element.id === focusedId) newElement.focus();\n        Object.assign(newElement, element);\n      }\n    });\n  };\n\n  // Listen state setter\n  emitter.on('*', (type, e) => {\n    state[type] = e\n    renderer(view(state, emitter.emit))\n  })\n  \n  renderer(view(state, emitter.emit));\n}\n","export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i&&i.push(e)||n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&i.splice(i.indexOf(e)>>>0,1)},emit:function(t,e){(n.get(t)||[]).slice().map(function(n){n(e)}),(n.get(\"*\")||[]).slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.es.js.map\n"],"names":["isSVG","tagName","patt","RegExp","some","tag","test","objectToStyleString","styles","Object","keys","map","prop","join","n","emitter","all","Map","on","t","e","i","get","push","set","off","splice","indexOf","emit","slice","attrs","children","Array","isArray","key","toLocaleLowerCase","elem","assign","document","createElement","createElementNS","hasOwnProperty","setAttribute","style","child","append","root","view","initState","state","clear","cacheProps","id","selectionStart","selectionEnd","selectionDirection","scrollTop","scrollLeft","renderer","tree","focusedId","activeElement","identifiedElements","prototype","call","querySelectorAll","firstChild","removeChild","forEach","element","newElement","getElementById","focus","type"],"mappings":"q/BAIA,SAASA,EAAMC,GACb,IAAMC,EAAO,IAAIC,OAAO,IAAMF,EAAU,IAAK,KAE7C,MADgB,CAAC,OAAQ,MAAO,MAAO,KACxBG,KAAK,SAAAC,UAAOH,EAAKI,KAAKD,KAOvC,SAASE,EAAoBC,GAC3B,OAAOC,OAAOC,KAAKF,GAChBG,IAAI,SAAAC,UAAWA,OAASJ,EAAOI,KAC/BC,KAAK,KCXV,ICNwBC,EDMlBC,ECN2B,CAACC,IAAIF,EAAEA,GAAG,IAAIG,IAAIC,GAAG,SAASC,EAAEC,GAAG,IAAIC,EAAEP,EAAEQ,IAAIH,GAAGE,GAAGA,EAAEE,KAAKH,IAAIN,EAAEU,IAAIL,EAAE,CAACC,KAAKK,IAAI,SAASN,EAAEC,GAAG,IAAIC,EAAEP,EAAEQ,IAAIH,GAAGE,GAAGA,EAAEK,OAAOL,EAAEM,QAAQP,KAAK,EAAE,IAAIQ,KAAK,SAAST,EAAEC,IAAIN,EAAEQ,IAAIH,IAAI,IAAIU,QAAQlB,IAAI,SAASG,GAAGA,EAAEM,MAAMN,EAAEQ,IAAI,MAAM,IAAIO,QAAQlB,IAAI,SAASG,GAAGA,EAAEK,EAAEC,WFoBlQ,SAAUnB,EAAS6B,OAAUC,6BAOxD,GAJIC,MAAMC,QAAQH,GAAQC,EAAWD,EACX,iBAAVA,GAAoBC,EAASR,KAAKO,GAG3B,mBAAZ7B,EAAwB,OAAOA,EAAQ6B,EAAOC,GAGzD,GAAgB,MAAZ9B,EAAiB,OAAO8B,EAG5B,GAAqB,iBAAVD,EACT,IAAK,IAAMI,KAAOJ,EAChBA,EAAMI,EAAIC,qBAAuBL,EAAMI,GAI3C,IAAIE,EAAO3B,OAAO4B,OAChBC,SAASC,cAActC,GACN,iBAAV6B,EAAqBA,EAAQ,IAGtC,GAAI9B,EAAMC,GAGR,IAAK,IAAMW,KAFXwB,EAAOE,SAASE,gBAAgB,6BAA8BvC,GAE3C6B,EACbA,EAAMW,eAAe7B,IACvBwB,EAAKM,aAAa9B,EAAMkB,EAAMlB,IAMhCkB,GAASA,EAAMW,eAAe,WAChCL,EAAKO,MAAQpC,EAAoBuB,EAAK,QAIxC,cAAoBC,kBAAU,OAAnBa,UACLZ,MAAMC,QAAQW,MAAQR,GAAKS,eAAUD,GACpCR,EAAKS,OAAOD,GAGnB,OAAOR,YCnDa,SAACU,EAAMC,EAAMC,YAAAA,IAAAA,EAAY,IAG7C,IAAIC,EAAQD,EAGZjC,EAAQC,IAAIkC,QAGZ,IAAMC,EAAa,SAAA/B,SAAM,CACvBgC,GAAIhC,EAAEgC,GACNC,eAAgBjC,EAAEiC,eAClBC,aAAclC,EAAEkC,aAChBC,mBAAoBnC,EAAEmC,mBACtBC,UAAWpC,EAAEoC,UACbC,WAAYrC,EAAEqC,aAOVC,EAAW,SAAAC,GAKf,IAJA,IAAMC,GAAatB,SAASuB,eAAiB,CAACT,GAAG,KAAKA,GAChDU,EAAqB9B,MAAM+B,UAAUpD,IAAIqD,KAAK1B,SAAS2B,iBAAiB,QAASd,GAGhFL,EAAKoB,YAAYpB,EAAKqB,YAAYrB,EAAKoB,YAC9CpB,EAAKD,aAALC,EAAed,MAAMC,QAAQ0B,GAAQA,EAAO,CAACA,IAE7CG,EAAmBM,QAAQ,SAAAC,GACzB,IAAMC,EAAahC,SAASiC,eAAeF,EAAQjB,IAC/CkB,IAECD,EAAQjB,KAAOQ,GAAWU,EAAWE,QACxC/D,OAAO4B,OAAOiC,EAAYD,OAMhCtD,EAAQG,GAAG,IAAK,SAACuD,EAAMrD,GACrB6B,EAAMwB,GAAQrD,EACdsC,EAASX,EAAKE,EAAOlC,EAAQa,SAG/B8B,EAASX,EAAKE,EAAOlC,EAAQa"}